@startuml sequence-diagram
'https: //plantuml.com/sequence-diagram



Actor -> FansController: 1.1 关注用户
Actor -> FansController: 2.1 取消关注
Actor -> FansController: 3.1 查询是否关注用户
Actor -> FansController: 4.1 查询用户关注列表
Actor -> FansController: 5.1 查询用户粉丝列表
FansController -> UserService: 1.2 校验评论对象是否存在
UserService --> FansController: 1.3.1.1 失败
Actor <-- FansController: 1.3.1.2 返回失败信息
FansController -> FansService: 1.3.2 关注用户
FansService -> RedisUtil: 1.4 自己关注数+1，用户粉丝数+1
FansService -> MessageService: 1.5 发送关注通知
FansService --> FansController: 1.6 关注成功
Actor <-- FansController: 1.7 返回关注信息
FansController -> FansService: 2.2 取消关注用户
FansService -> RedisUtil: 2.3 自己关注数-1，用户粉丝数-1
FansService --> FansController: 2.4 取消关注成功
Actor <-- FansController: 2.5 返回取消关注信息
FansController -> RedisUtil: 3.2 获取是否关注用户信息
FansController <-- RedisUtil: 3.3 返回数据
Actor <-- FansController: 3.4返回是否关注用户信息
FansController -> FansService: 4.2 查询用户关注列表
FansController <-- FansService: 4.3 返回数据
Actor <-- FansController: 4.4 返回关注列表
FansController -> FansService: 5.2 查询用户粉丝列表
FansService -> RedisUtil: 5.3 获取粉丝关系
FansService <-- RedisUtil: 5.4 返回粉丝关系
FansController <-- FansService: 5.5 返回数据
Actor <-- FansController: 5.6 返回粉丝列表
@enduml